(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1553],{78925:function(e,l,n){"use strict";n.d(l,{Z:function(){return et}});var t=n(85893),a=n(77268),s=n(33206),r=n(27192),i=n(67294),o=n(61227),c=n(17831),d=n(51680),u=n(31601),m=n(41664),x=n.n(m),p=n(63328),h=n(32697),f=n(2974),v=n(76201),b=n(58298),g=n(48583),j=n(62714),N=n(87521),k=n(72150),w=n(8652),y=n(78062),C=n(37918),M=n(52621),I=n(5590),Z=n(67452),S=n(94184),L=n.n(S),A=n(71100),T=n(11441),E=n(2593),P=n(61744),O=n(3638),R=n(1359),F=n(5678),D=n(20853),_=n(25675),K=n.n(_);let H=e=>{let{className:l,symbol:n,name:a}=e,s=(0,i.useMemo)(()=>{let e=n.toLowerCase();switch(e){case"tgpt":case"gpt":return"/tokens/gpt.png";case"lai":case"tlai":return"/tokens/lai.png";case"bnb":case"tbnb":return"/tokens/bnb.png";case"usdt":return"/tokens/usdt.png";case"testusdc":case"usdc":return"/tokens/usdc.png";case"primal":case"tprimal":return"/tokens/primal.png";case"eth":return"/tokens/eth.png";case"btc":return"/tokens/btc.png";default:return""}},[n]);return s?(0,t.jsx)(K(),{className:L()("w-[20px] h-[20px]",l),src:s,width:20,height:20,alt:a}):null},$=e=>{let{index:l,token:n,selectedToken:a,chooseToken:s}=e;return(0,t.jsx)("div",{onClick:()=>s(n),className:L()("px-[10px] py-[5px] w-full cursor-pointer hover:bg-theme-main hover:text-theme-main-text",{"border-t border-white/20":0!==l,"bg-theme-main/20":a&&n.address===a.address&&n.symbol===a.symbol}),children:(0,t.jsxs)("span",{className:"w-full overflow-hidden flex whitespace-nowrap items-center",children:[(0,t.jsx)(H,{className:"flex-none mr-[10px]",symbol:n.symbol,name:n.name}),(0,t.jsxs)("span",{className:"flex-none whitespace-pre-wrap",children:[n.symbol," - "]}),(0,t.jsx)("span",{className:"flex-auto text-ellipsis overflow-hidden",children:n.name})]})},"".concat(n.symbol,"-").concat(n.address))},Y=e=>{let{tokens:l,selectedToken:n,chooseToken:a,closeDropdown:s,refToggle:r,dropdownHeading:o}=e,c=(0,i.useRef)(null),d=(0,i.useCallback)(e=>{if(!e||!e.target||!r)return;let l=(0,D.k)(e.target,r.current);l||s()},[s,r]);return(0,F.t$)(c,d),(0,t.jsxs)("div",{ref:c,className:"absolute bottom-[100%] mb-[4px] right-0 w-[250px] max-w-[90vw] rounded-[10px] border flex-col border-[#d8e0e326] bg-[#15161a] shadow-lg shadow-[#00000040] max-h-[200px] overflow-hidden flex text-[16px]",children:[o&&(0,t.jsx)("div",{className:"flex-none font-bold px-[10px] py-[5px]",children:o}),(0,t.jsx)("div",{className:"flex flex-col flex-auto overflow-auto py-[5px]",children:l.map((e,l)=>(0,t.jsx)($,{token:e,selectedToken:n,index:l,chooseToken:a},"".concat(e.address,"-").concat(e.symbol)))}),(!l||0===l.length)&&(0,t.jsx)("div",{className:"px-[10px] py-[10px] text-center",children:"No allowed payment tokens found on this chain"})]})},z=e=>{let{className:l,selectToken:n,selectedToken:a,tokens:s,dropdownHeading:r,loading:c}=e,{value:d,setFalse:u,toggle:m}=(0,F.kt)(!1),x=(0,i.useCallback)(e=>{n(e),u()},[n,u]),p=(0,i.useRef)(null);return(0,t.jsx)("div",{className:l,children:(0,t.jsxs)("div",{className:"relative w-full",children:[(0,t.jsx)(o.Z,{loading:c,ref:p,onClick:m,className:"w-full h-[60px] pr-[18px] rounded-tl-none rounded-bl-none pl-[20px] group",variant:"theme-main",children:(0,t.jsxs)("span",{className:"flex items-center gap-[4px]",children:[a?null==a?void 0:a.symbol:"Choose",(0,t.jsx)("span",{className:L()("block w-[10px] h-[6px] border-l-[5px] border-r-[5px] border-b-[6px] border-transparent border-b-[#000] transition-all relative top-[0px] group-hover:border-b-[#fff]",{"-rotate-180":!d})})]})}),d&&(0,t.jsx)(Y,{tokens:s,selectedToken:a,chooseToken:x,closeDropdown:u,refToggle:p,dropdownHeading:r})]})})},B=e=>{let{selectedPrice:l="",setSelectedPrice:n,setSelectedTokenAddress:a}=e,s=(0,p.xx)(),o=(0,i.useMemo)(()=>(0,R.v)({chainId:s}),[s]),c=(0,i.useMemo)(()=>{if(!o)return;let{fee:e,feePrecision:l}=o;return Number(e)/Number(l)*100},[o]),{allowedTokensAddresses:d,allowedTokens:u,selectedToken:m,selectToken:x,isLoadingTokens:f}=function(){let[e,l]=(0,i.useState)(void 0),[n,t]=(0,i.useState)(!1),a=(0,p.xx)(),s=(0,O.$)({}),o=(0,i.useMemo)(()=>{var e,l,n;return a&&null!==(n=null===r.re||void 0===r.re?void 0:null===(e=r.re[a])||void 0===e?void 0:null===(l=e.nftMarketplace)||void 0===l?void 0:l.allowedPaymentTokens)&&void 0!==n?n:[]},[a]),c=(0,i.useMemo)(()=>!!o.find(e=>(0,O.S)(e)),[o]),[d,u]=(0,i.useState)([]),m=(0,i.useCallback)(async e=>await Promise.all(e.map(async e=>await (0,h.EC)({address:e}))),[]),x=(0,i.useCallback)(async e=>{t(!0);let n=await m(e.filter(e=>!(0,O.S)(e)));s&&c&&n.unshift(s),u(n);let a=n.find(e=>e.address===o[0]);l(a),t(!1)},[s,c,u,m,o]);(0,i.useEffect)(()=>{x(o)},[x,o]);let f=(0,i.useCallback)(e=>{l(e)},[l]);return{isLoadingTokens:n,allowedTokensAddresses:o,allowedTokens:d,selectedToken:e,selectToken:f}}();(0,i.useEffect)(()=>{a(null==m?void 0:m.address)},[a,m]);let v=(0,i.useMemo)(()=>{var e;return null!==(e=null==m?void 0:m.decimals)&&void 0!==e?e:18},[m]),b=(0,i.useCallback)(e=>{if(!o||!l||isNaN(Number(l)))return;let{feePrecision:n}=o,t=E.O$.from(P.parseUnits(Number(l).toString(),v)).mul(e).div(n).toString(),a=Math.max(0,l.indexOf(".")>0?l.length-l.indexOf("."):0);return(0,T.XQ)(E.O$.from(t),v,Math.min(v,a+2))+" ".concat((null==m?void 0:m.symbol)||"")},[o,l,v,m]),g=(0,i.useMemo)(()=>{if(!o)return;let{fee:e,feePrecision:l}=o;return b(Number(l)-Number(e))},[o,b]),j=(0,i.useMemo)(()=>{if(!o)return;let{fee:e}=o;return b(Number(e))},[o,b]),N=(0,i.useId)();return(0,t.jsxs)("div",{className:L()("flex flex-col w-full"),children:[(0,t.jsxs)("div",{className:"flex w-full items-center border border-solid border-theme-main justify-between text-[20px] rounded-full relative",children:[(0,t.jsx)("input",{id:N,type:"text",className:"bg-transparent text-white w-full py-[4px] pl-[20px] pr-[50px] rounded-full h-[58px] focus:outline-none",placeholder:"Enter price",value:l,onChange:e=>{let{target:{value:l}}=e,t=l.split(".")[1];if(t&&t.length>v){let e=l.split(".")[0];n("".concat(e,".").concat(t.substring(0,v)));return}n(l)}}),(0,t.jsx)(z,{loading:f,tokens:u,selectedToken:m,selectToken:x,dropdownHeading:"Select Token",className:"absolute right-[-3px] top-[-1px] min-w-[60px]"})]}),(0,t.jsxs)("div",{className:"mt-[6px] pl-[20px] flex flex-col gap-[4px] [&_p]:leading-none [&_p]:text-[14px]",children:[(0,t.jsxs)("p",{children:["You get: ",null!=g?g:"-"]}),(0,t.jsxs)("p",{children:["Fees (",c,"%): ",null!=j?j:"-"]})]})]})};var U=n(4356),Q=n(24574),X=n(24592);let V=e=>{let{data:l,collectionName:n,collectionChainId:s,collectionAddress:r,id:c,onSuccessCb:d}=e,m=(0,g.b9)(N.HP),{address:x}=(0,p.mA)(),{sellAtPrice:h}=R.B,[f,v]=(0,i.useState)(void 0),[b,j]=(0,i.useState)(void 0),[S,T]=(0,i.useState)(!1),E=(0,i.useCallback)(async()=>{if(!x||!c||!r||!b||!s)return Promise.reject();T(!0);try{let e=await h({myAddress:x,token:{address:r,id:c,type:Z.ItemType.ERC721},price:b,priceTokenAddress:f,chainId:s});return T(!1),e}catch(e){return T(!1),Promise.reject(e)}},[c,x,r,h,s,b,f]),{listOrderAsync:P,listOrderAsyncLoading:F}=function(){let{mutateAsync:e,isLoading:l}=(0,Q.D)({mutationFn:e=>{let{order:l,chainId:n}=e;return X.w.createListing({chainId:n,order:l})}});return{listOrderAsync:e,listOrderAsyncLoading:l}}(),D=(0,i.useCallback)(async e=>{if(e&&P&&s)return await P({order:e,chainId:s})},[P,s]),{data:_}=(0,p.dQ)({address:f}),K=(0,i.useMemo)(()=>b&&null!=f?"":b||null!=f?b?null==f?"Please choose token":"":"Please enter price":"Enter price and choose token",[b,f]),H=(0,O.$)({}),$=(0,i.useMemo)(()=>null==f?"":""===f?null==H?void 0:H.symbol:null==_?void 0:_.symbol,[H,f,_]),[Y,z]=(0,i.useState)(void 0),V=(0,i.useCallback)(async()=>{if(b&&$)try{let e=await E();await D(e),z({price:b,symbol:$}),null==d||d()}catch(e){m({open:!0,message:(0,I.W)(e)})}},[E,D,z,b,$,d,m]),W=F||S,{type:q}=(0,U.v)({chainId:s,tokenAddress:r}),G="lai-capsule"===q,{tier:J,daysLeft:ee,tierExpirationDurationDays:el,tierExpirationDurationMonths:en,tierLoading:et}=(0,M.r)({tokenAddress:r,chainId:s,nftId:c,enabled:G});return(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 md:h-[469px] md:overflow-hidden",children:[(0,t.jsxs)("div",{className:"md:h-[469px] min-h-[200px] relative",children:[G&&(0,t.jsx)(C.Z,{tier:J}),(0,t.jsx)("img",{src:l.image,alt:l.name,className:L()("object-cover object-center w-full h-full relative",{"opacity-60":G})}),G&&(0,t.jsx)(y.Z,{className:"mt-[-27px] relative z-10",tier:J,tierExpirationDurationMonths:en})]}),(0,t.jsxs)("div",{className:"px-[20px] grid grid-cols-1 gap-[20px] py-[20px] overflow-auto md:max-h-[469px]",children:[G?(0,t.jsxs)("div",{children:[(0,t.jsx)(w.Z,{tier:J,nftId:c}),(0,t.jsx)(k.Z,{tier:J,daysLeft:ee,tierExpirationDurationDays:el})]}):(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"text-[22px] font-bold",children:l.name}),(0,t.jsx)(A.Z,{collectionName:l.name,nftId:c}),l.description&&(0,t.jsx)("p",{className:"italic mt-[10px]",children:l.description})]}),(0,t.jsx)(a.Z,{className:"flex flex-col w-full justify-end gap-[10px]",validChains:[s],showMessage:!1,children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"w-full",children:(0,t.jsx)(u.Z,{})}),Y?(0,t.jsxs)("div",{className:"min-h-[50px] flex w-full items-center justify-center text-center p-[20px] rounded-full from-theme-main/20 bg-gradient-to-r",children:["Listed for ",Y.price," ",Y.symbol]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(B,{setSelectedTokenAddress:v,setSelectedPrice:j,selectedPrice:b}),K&&(0,t.jsx)(o.Z,{className:"w-full",disabled:!0,children:K}),!K&&(0,t.jsxs)(o.Z,{className:"w-full",disabled:W,loading:W,onClick:V,children:["List for ",b," ",$]})]})]})})]})]})};var W=n(92350),q=n(29537);let G=e=>{let{uri:l,id:n,collectionName:a,collectionAddress:s,collectionChainId:r,className:c,onListing:d}=e,{data:u,isLoading:m}=(0,j._)({uri:l}),x=(0,g.b9)(W.R),p=(0,i.useCallback)(()=>{u&&s&&n&&x({open:!0,nftCollection:{name:a},nft:u,nftId:n,children:(0,t.jsx)(V,{data:u,collectionName:a,collectionAddress:s,id:n,collectionChainId:r,onSuccessCb:d})})},[x,u,s,n,a]);return(0,t.jsx)(q.Z,{data:u,isLoading:m,collectionName:a,nftId:n,collectionAddress:s,nftChainId:r,bottomContent:(0,t.jsx)("div",{className:"w-full flex flex-col items-center pt-[10px]",children:(0,t.jsx)(o.Z,{className:"w-full",onClick:p,children:"LIST"})}),className:c})},J=e=>{let{page:l,pages:n,prevPage:a,nextPage:s}=e,r=(0,i.useCallback)(()=>{null==a||a()},[a]),c=(0,i.useCallback)(()=>{null==s||s()},[s]);return n<2?null:(0,t.jsxs)("div",{className:"flex items-center justify-center gap-[10px] mt-[30px]",children:[r&&(0,t.jsx)(o.Z,{size:"md",borderFullyRounded:!0,disabled:l<2,onClick:r,children:"PREV"}),(0,t.jsxs)("p",{className:"flex items-center",children:[(0,t.jsx)("span",{className:"text-theme-main text-[1.3em] font-bold",children:l}),"/",n]}),c&&(0,t.jsx)(o.Z,{size:"md",borderFullyRounded:!0,disabled:l>=n,onClick:c,children:"NEXT"})]})};var ee=n(67339);let el=e=>{let{collectionAddress:l,collectionChainId:n}=e,{name:a,balanceOf:s,isLoading:r}=function(e){let{collectionAddress:l,collectionChainId:n}=e,{address:t}=(0,p.mA)(),{data:a,isLoading:s}=(0,p.do)({scopeKey:"".concat(l,"-name"),address:l,abi:h.YD,functionName:"name",chainId:n}),{data:r,isLoading:i}=(0,p.do)({scopeKey:"".concat(l,"-balanceOf-").concat(t),address:l,abi:h.YD,functionName:"balanceOf",chainId:n,args:[t],enabled:!!t,select:e=>e?null==e?void 0:e.toNumber():0});return{isLoading:s||i,name:a,balanceOf:r}}({collectionAddress:l,collectionChainId:n}),{nftUris:m,isLoading:g,currentPage:j,changePage:N,maxPages:k,prevPage:w,nextPage:y}=function(e){let{collectionAddress:l,collectionChainId:n,balanceOf:t}=e,{address:a}=(0,p.mA)(),{data:s}=(0,p.do)({scopeKey:"".concat(l,"-name"),address:l,abi:f.j,chainId:n,functionName:"name"}),r=(0,i.useMemo)(()=>{var e;return null!==(e=Array(null!=t?t:0).fill(null).map((e,t)=>({address:l,abi:f.j,functionName:"tokenOfOwnerByIndex",chainId:n,args:[a,t]})))&&void 0!==e?e:[]},[t,a,l,n]),{data:o,isLoading:c,page:d,totalPages:u,nextPage:m,prevPage:x,setPage:h}=function(e){var l;let{readsConfig:n,perPage:t}=e,a=(0,i.useId)(),[s,r]=(0,i.useState)(0),o=(0,i.useMemo)(()=>n.contracts,[n]),c=(0,i.useMemo)(()=>Math.max(1,Math.ceil(o.length/t)),[o,t]),d=(0,i.useMemo)(()=>(function e(l,n){if(!l.length)return[];let t=l.slice(0,n),a=l.slice(n);return[t,...e(a,n)]})(o,t),[o,t]),u=(0,i.useMemo)(()=>d[s],[s,d]),{data:m,isLoading:x}=(0,p.Dm)({...n,scopeKey:"".concat(null!==(l=null==n?void 0:n.scopeKey)&&void 0!==l?l:a,"-").concat(t,"-").concat(s,"-").concat(c),contracts:u}),h=(0,i.useCallback)(e=>{r(Math.max(1,Math.min(e,c)))},[r,c]),f=(0,i.useCallback)(()=>{r(e=>Math.min(e+1,c))},[r,c]),v=(0,i.useCallback)(()=>{r(e=>Math.max(e-1,0))},[r]);return{data:m,isLoading:x,page:s,setPage:h,totalPages:c,nextPage:f,prevPage:v}}({readsConfig:{scopeKey:"".concat(l,"-tokenOfOwnerByIndex-").concat(a),contracts:r,enabled:r.length>0&&!!a&&!!t,select:e=>e?e.filter(e=>!!e).map(e=>e.toNumber()):[]},perPage:8}),v=(0,i.useMemo)(()=>{var e;return o&&null!==(e=null==o?void 0:o.map(e=>({address:l,abi:f.j,functionName:"tokenURI",chainId:n,args:[e]})))&&void 0!==e?e:[]},[o,l,n]),{data:b,isLoading:g}=(0,p.Dm)({scopeKey:"".concat(l,"-tokenURI-").concat(a,"-").concat(d),contracts:v,enabled:v.length>0&&!!a&&!!t,select:e=>e?e.map((e,l)=>{var n;return{uri:null==e?void 0:e.replace(/\.json\d*/g,".json"),id:null==o?void 0:null===(n=o[l])||void 0===n?void 0:n.toString()}}):e});return{name:s,nftIds:o,nftUris:b,isLoading:c||g,changePage:h,nextPage:m,prevPage:x,currentPage:d,maxPages:u}}({collectionAddress:l,balanceOf:null!=s?s:0,collectionChainId:n}),{nftData:C,listingsLoading:M,refetchListings:I,itemHasListing:Z}=(0,v.k)({collectionAddress:l,chain_id:n,page:1,limit:1e3}),S=(0,i.useCallback)(e=>{if(!C)return;let l=C.filter(l=>l.id===e);return l.length>0?l[0]:void 0},[C]),L=g||r||M;return(0,t.jsxs)("div",{className:"relative",children:[L&&(0,t.jsx)(c.Z,{}),(0,t.jsxs)("div",{className:"mb-[10px]",children:[(0,t.jsx)("p",{className:"text-[24px] font-bold",children:a}),(0,t.jsx)(u.Z,{propChainId:n})]}),(0,t.jsx)(b.Z,{hasNoSidebar:!0,empty:!L&&(!m||0===m.length),emptyMessage:"You don't have any ".concat(a," NFTs."),emptyCta:(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(x(),{href:"".concat(d.f9.NftMarketplace.href,"?collection=").concat(l,"&chainId=").concat(n),className:"mt-[20px]",target:d.f9.NftMarketplace.target,children:(0,t.jsx)(o.Z,{children:"SEARCH IN THE MARKETPLACE"})})}),children:null==m?void 0:m.map(e=>{let{uri:s,id:r}=e;return(0,t.jsx)(i.Fragment,{children:Z(r)?(0,t.jsx)(ee.Z,{nftOffer:S(r),onCancelListing:I,showChain:!0}):(0,t.jsx)(G,{uri:s,id:r,collectionName:a,collectionAddress:l,collectionChainId:n,onListing:I})},s+r)})}),(0,t.jsx)(J,{page:j+1,pages:k,prevPage:w,nextPage:y})]})},en=()=>{let e=function(){let e=(0,i.useMemo)(()=>{var e;return null!==(e=s._I.filter(e=>{var l,n,t;return!!(null===r.re||void 0===r.re?void 0:null===(l=r.re[e])||void 0===l?void 0:null===(n=l.nftMarketplace)||void 0===n?void 0:null===(t=n.collections)||void 0===t?void 0:t.length)}))&&void 0!==e?e:[]},[]);return(0,i.useMemo)(()=>{var l;return e.map(e=>{var n,t;return{chainId:e,collections:null!==(l=null===r.re||void 0===r.re?void 0:null===(n=r.re[e])||void 0===n?void 0:null===(t=n.nftMarketplace)||void 0===t?void 0:t.collections)&&void 0!==l?l:[]}}).map(e=>{let{chainId:l,collections:n}=e;return n.map(e=>{let{type:n,address:t}=e;return{type:n,chainId:l,tokenAddress:t}})}).flat()},[e])}();return(0,t.jsx)(a.Z,{children:(0,t.jsx)("div",{className:"flex flex-col w-full gap-[40px]",children:e.map(e=>{let{chainId:l,tokenAddress:n}=e;return(0,t.jsx)(el,{collectionAddress:n,collectionChainId:l},n)})})})};var et=en},12918:function(e,l,n){e.exports=n(89185)}}]);