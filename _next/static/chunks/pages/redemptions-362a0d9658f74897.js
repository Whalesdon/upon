(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5799],{7983:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/redemptions",function(){return s(90851)}])},93688:function(e,t,s){"use strict";s.d(t,{C:function(){return r}});var l=s(67294),a=s(63328),i=s(33206),n=s(63496);let r=()=>{let[e,t]=(0,l.useState)(!1),{address:s}=(0,a.mA)(),{chain:r}=(0,a.LN)(),c=(0,n.s)();return(0,l.useEffect)(()=>{t(c&&!!(null==r?void 0:r.id)&&!!s&&i._I.includes(r.id))},[s,null==r?void 0:r.id,c]),e}},4528:function(e,t,s){"use strict";var l=s(67294),a=s(49802),i=s(13392);let n=()=>(0,a.eI)(i.O.NEXT_PUBLIC_SUPABASE_URL,i.O.NEXT_PUBLIC_SUPABASE_KEY);t.Z=function(){return(0,l.useMemo)(n,[])}},90851:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return H}});var l,a,i,n,r=s(85893),c=s(66906),o=s(94184),d=s.n(o),x=s(67294);let m=(0,x.createContext)(void 0);var p=s(52236),f=s(25675),u=s.n(f);let h=e=>{let{width:t=41,height:s=48,alt:i,fill:n,iconName:c="icon-redeem-capsule",className:o,style:d}=e;return(0,r.jsxs)("svg",{width:t,height:s,className:o,viewBox:"0 0 41 48",fill:"none",xmlns:"http://www.w3.org/2000/svg",role:i?"img":void 0,"aria-labelledby":"title-svg-".concat(c),children:[i&&(0,r.jsx)("title",{id:"title-svg-".concat(c),children:i}),(0,r.jsx)("path",{d:"M10.054 42.3381C4.91336 39.3702 3.15207 32.797 6.11999 27.6564L11.1927 18.8703L29.8084 29.6181L24.7357 38.4042C21.7678 43.5448 15.1945 45.306 10.054 42.3381Z",fill:null!==(l=null==d?void 0:d.fill)&&void 0!==l?l:n}),(0,r.jsx)("path",{d:"M30.6921 6.58329C35.5936 9.41314 37.2729 15.6806 34.4431 20.582L29.6204 28.9351L11.8707 18.6873L16.6934 10.3342C19.5232 5.43279 25.7907 3.75344 30.6921 6.58329Z",stroke:null!==(a=null==d?void 0:d.fill)&&void 0!==a?a:n})]})},j=e=>{let{width:t=26,height:s=50,alt:l,fill:a,iconName:c="icon-redeem-capsule-full",className:o,style:d}=e;return(0,r.jsxs)("svg",{width:t,height:s,className:o,viewBox:"0 0 25.6149 49.78369",fill:"none",xmlns:"http://www.w3.org/2000/svg",role:l?"img":void 0,"aria-labelledby":"title-svg-".concat(c),children:[l&&(0,r.jsx)("title",{id:"title-svg-".concat(c),children:l}),(0,r.jsx)("path",{d:"m12.80559.5c6.7962,0,12.3056,5.5094,12.3056,12.3056v11.5878H.5v-11.5878C.5,6.00939,6.0094.5,12.80559.5Z",stroke:null!==(i=null==d?void 0:d.fill)&&void 0!==i?i:a}),(0,r.jsx)("path",{d:"m.00375,24.89032v12.08777C.00375,44.05042,5.73703,49.78369,12.80929,49.78369s12.8056-5.73328,12.8056-12.8056v-12.08777H.00375Zm10.60193,16.78815l-5.5-5.5,1.40997-1.41003,4.09003,4.08002,10.58997-10.58002,1.41003,1.40997-12,12.00006Z",fill:null!==(n=null==d?void 0:d.fill)&&void 0!==n?n:a})]})};var v=s(61227),g=s(48583),b=s(87521);let N=e=>{let{className:t,style:s}=e,l=(0,g.b9)(b.T9),{fractionFull:a,redeemedFull:i,redeemedFractions:n}=(0,x.useContext)(m),c=(0,x.useCallback)(()=>{l({open:!0,fullCapsules:i,fractions:n,fullParts:a})},[l,n,i,a]);return(0,r.jsx)("div",{className:t,style:s,children:(0,r.jsx)(v.Z,{variant:"theme-light",size:"md",borderFullyRounded:!0,onClick:c,children:"SHARE"})})},y=(0,p.q)(h),w=(0,p.q)(j),C=e=>{let{className:t,showOnlyFull:s,style:l}=e,{step:a,fractionFull:i,redeemedFractions:n,redeemedFull:c}=(0,x.useContext)(m),[o,d]=(0,p.bY)(null!=c?c:0,e=>({from:{fill:"#282930"},delay:200*e,config:{duration:1e3}})),[f,u]=(0,p.bY)(i,e=>({from:{fill:"#282930"},to:{fill:"#00F0FF"},delay:200*e,config:{duration:1e3}}));return(0,x.useEffect)(()=>{2===a?(u.start(e=>({to:{fill:e<n?"#00F0FF":"#282930"},delay:100*e})),d.start(e=>({to:{fill:"#00F0FF"},delay:100*e}))):(u.start(()=>({to:{fill:"#282930"}})),d.start(()=>({to:{fill:"#282930"}})))},[a,u,n,d]),(0,r.jsxs)("div",{className:t,style:l,children:[(0,r.jsx)("div",{className:"hidden lg:flex justify-end mb-[15px]",children:(0,r.jsx)(N,{})}),c>0?(0,r.jsxs)(r.Fragment,{children:[c<=8?(0,r.jsx)("div",{className:"flex flex-row-reverse flex-wrap items-center justify-center lg:justify-start",children:o.map((e,t)=>(0,r.jsx)("div",{className:"flex justify-center lg:justify-end w-[12.5%]",children:(0,r.jsx)(w,{style:{fill:e.fill}})},t))}):(0,r.jsx)("div",{className:"flex flex-row-reverse flex-wrap items-center justify-center lg:justify-start",children:o.filter((e,t)=>0===t).map((e,t)=>(0,r.jsxs)("div",{className:"flex justify-center items-center lg:justify-end w-[30px] relative",children:[(0,r.jsxs)("span",{className:"text-theme-main text-[30px] font-extrabold text-right absolute right-[40px]",children:[c,(0,r.jsx)("span",{className:"text-[#fff]",children:"x"})]}),(0,r.jsx)(w,{style:{fill:e.fill}})]},t))}),(0,r.jsxs)("p",{className:"text-[#fff] lg:text-[#727C7D] text-[20px] lg:text-[23px] xl:text-[32px] text-center lg:text-right",children:["Your complete capsules:"," ",(0,r.jsx)("span",{className:"text-theme-main",children:c})]})]}):(0,r.jsx)(r.Fragment,{children:!s&&(0,r.jsx)("div",{className:"grid grid-cols-8",children:f.map((e,t)=>(0,r.jsx)(y,{style:{fill:e.fill}},t))})})]})},_=e=>{let{className:t,style:s}=e,{step:l,fractionFull:a,redeemedFractions:i}=(0,x.useContext)(m),n=(0,x.useMemo)(()=>new p.qK(0,{config:{duration:1500}}),[]);return(0,x.useEffect)(()=>{2===l?n.start(i):n.set(0)},[l,n,i]),(0,r.jsxs)("div",{className:d()("w-full text-[20px] font-medium text-center lg:text-left leading-none lg:text-[26px] xl:text-[30px]",t),style:s,children:[(0,r.jsx)("p",{className:"text-theme-main",children:"You have collected"}),(0,r.jsxs)("p",{className:"font-extrabold mb-[10px] lg:mb-[15px] text-[80px] lg:text-[100px] xl:text-[130px] leading-none lg:leading-2",children:[(0,r.jsx)(p.q.span,{className:"text-theme-main",children:n.interpolate(e=>String(Math.round(e)).padStart(2,"0"))}),"/",a]}),(0,r.jsx)("p",{className:"text-[#fff]",children:"of a fractional data capsule"})]})},k=()=>{let{step:e,redeemedFractions:t,fractionFull:s}=(0,x.useContext)(m),l=(0,x.useMemo)(()=>new p.qK("0%",{config:{duration:1e3}}),[]),a=(0,x.useMemo)(()=>new p.qK("0% 0%",{config:{duration:1e3}}),[]),i=(0,x.useMemo)(()=>t/s*100,[t,s]);return(0,x.useEffect)(()=>{l&&(2===e&&i?(l.start("".concat(i,"%")),a.start("0% ".concat(100-i,"%"))):(l.set("0%"),a.set("0% 0%")))},[e,i,l,a]),(0,r.jsxs)("div",{className:"md:py-[100px]",children:[e<=1&&(0,r.jsx)("div",{className:"relative",children:(0,r.jsx)(u(),{src:"/redeem/ai_avatar.webp",width:641,height:1507,className:"object-contain object-center mx-auto max-h-[250px] md:max-h-none",alt:"AI Avatar",quality:100})}),2===e&&(0,r.jsxs)("div",{className:"relative max-w-[300px] md:max-w-[466px] mx-auto",children:[(0,r.jsx)(u(),{src:"/redeem/ai_capsule.webp",width:466,height:980,className:"object-contain object-center",alt:"AI Capsule",quality:100}),(0,r.jsx)(p.q.div,{className:"w-[calc(100%+30px)] left-[-15px] h-[3px] rounded-full bg-theme-main absolute",style:{bottom:l}}),(0,r.jsxs)(p.q.div,{className:"absolute overflow-hidden left-0 right-0",style:{height:l,bottom:0,maskImage:"url('/redeem/ai_capsule_color.webp')",WebkitMaskImage:"url('/redeem/ai_capsule_color.webp')",maskSize:"cover",WebkitMaskSize:"cover",maskPosition:"0% bottom",WebkitMaskPosition:"0% bottom"},children:[(0,r.jsx)(u(),{src:"/redeem/ai_capsule_color.webp",width:466,height:980,className:"object-contain object-center absolute left-0 right-0 bottom-0",alt:"AI Capsule",quality:100}),(0,r.jsx)("div",{className:"h-[50px] absolute bg-gradient-to-b from-theme-main w-full opacity-75 z-20 mix-blend-soft-light top-0"}),(0,r.jsx)("div",{className:"h-[50px] absolute bg-gradient-to-b from-theme-main w-full opacity-75 z-20 mix-blend-soft-light top-0"})]}),(0,r.jsxs)(p.q.div,{className:"absolute overflow-hidden left-0 right-0",style:{height:"100%",bottom:0,maskImage:"url('/redeem/ai_capsule_color.webp')",WebkitMaskImage:"url('/redeem/ai_capsule_color.webp')",maskSize:"cover",WebkitMaskSize:"cover",maskPosition:"0% bottom",WebkitMaskPosition:"0% bottom"},children:[(0,r.jsxs)(p.q.div,{className:d()("lg:hidden absolute px-[20px] py-[10px] text-shadow z-10 flex items-center w-full gap-[20px] pointer-events-none",{"bg-gradient-to-b from-black/70":i>50,"!pt-[30px]":i>50&&i<90,"flex-col":i>50,"flex-col-reverse":i<=50,"!pb-[60px]":i<10,"!pt-[60px]":i>=90}),style:{bottom:l,translateY:i>50?"100%":0},children:[(0,r.jsx)(_,{}),(0,r.jsx)(C,{showOnlyFull:!0})]}),(0,r.jsx)(p.q.div,{className:"h-[50px] absolute bg-gradient-to-b from-theme-main w-full opacity-30 z-20 pointer-events-none",style:{bottom:l,translateY:"100%"}}),(0,r.jsx)(p.q.div,{className:d()("lg:hidden absolute px-[20px] py-[10px] text-shadow z-10 flex flex-col items-center w-full",{"pb-[20px]":i>50&&i<90,"!pt-[20px]":i>=10&&i<=50||i>=90,"!pb-[15px]":i<10}),style:{bottom:l,translateY:i<10?0:i<=50||i>=90?"100%":0},children:(0,r.jsx)(N,{className:"relative z-[50]"})})]})]})]})},A=e=>{let{className:t}=e,{step:s}=(0,x.useContext)(m);return(0,r.jsxs)("div",{className:d()("font-main",{"hidden lg:grid":s>=2},t),children:[(0,r.jsx)("div",{children:(0,r.jsxs)("h1",{className:"text-[36px] md:text-[46px] text-center md:text-left leading-none font-extrabold",children:["Welcome to ",(0,r.jsx)("span",{className:"text-theme-main",children:"Alex"})]})}),(0,r.jsx)("div",{className:"hidden md:block"}),(0,r.jsx)("div",{children:(0,r.jsx)("p",{className:"text-[20px] md:text-[32px] leading[1.1em] font-medium text-center text-[#cccccc]",children:"Your key to infinite knowledge of the internet"})})]})};var E=s(73890),S=s(93688),M=s(61234),F=s(63328);let q=e=>{let{className:t,style:s}=e;return(0,r.jsxs)("div",{className:d()("oracle-container",t),style:s,children:[(0,r.jsx)("div",{className:"oracle green"}),(0,r.jsx)("div",{className:"oracle pink"}),(0,r.jsx)("div",{className:"oracle blue"}),(0,r.jsx)("div",{className:"oracle white"})]})},P=()=>{let{step:e}=(0,x.useContext)(m),[t,s]=(0,p.q_)(()=>({from:{opacity:0,y:100},config:{duration:1e3}})),[l,a]=(0,p.q_)(()=>({from:{opacity:0,y:100},config:{duration:1e3}})),[i,n]=(0,p.q_)(()=>({from:{opacity:0,scale:0},config:{duration:500}}));return(0,x.useEffect)(()=>{s&&s&&(1===e?(n.start({to:{opacity:1,scale:1}}),s.start({to:{opacity:1,y:0},delay:1e3}),a.start({to:{opacity:1,y:0},delay:600})):(s.set({opacity:0,y:100}),a.set({opacity:0,y:100}),n.set({opacity:0,scale:0})))},[e,a,s,n]),(0,r.jsxs)("div",{className:"relative md:ml-[-200px] md:mr-[-200px] md:w-[800px]",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-[20px] w-full",children:[(0,r.jsxs)(p.q.div,{className:"flex gap-[10px] flex-row-reverse",style:t,children:[(0,r.jsx)("div",{className:"rounded-full w-[50px] h-[50px] flex flex-col items-center justify-center bg-[#535357] flex-none",children:(0,r.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",className:"flex-none",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{d:"M9.00065 8.99998C7.80898 8.99998 6.78885 8.57567 5.94023 7.72706C5.09162 6.87845 4.66732 5.85831 4.66732 4.66665C4.66732 3.47498 5.09162 2.45484 5.94023 1.60623C6.78885 0.757619 7.80898 0.333313 9.00065 0.333313C10.1923 0.333313 11.2125 0.757619 12.0611 1.60623C12.9097 2.45484 13.334 3.47498 13.334 4.66665C13.334 5.85831 12.9097 6.87845 12.0611 7.72706C11.2125 8.57567 10.1923 8.99998 9.00065 8.99998ZM0.333984 17.6666V14.6333C0.333984 14.0194 0.492151 13.455 0.808485 12.9401C1.12482 12.4251 1.54443 12.0326 2.06732 11.7625C3.18676 11.2028 4.32426 10.7828 5.47982 10.5026C6.63537 10.2223 7.80898 10.0826 9.00065 10.0833C10.1923 10.0833 11.3659 10.2234 12.5215 10.5036C13.677 10.7839 14.8145 11.2035 15.934 11.7625C16.4576 12.0333 16.8776 12.4262 17.1939 12.9411C17.5102 13.4561 17.668 14.0201 17.6673 14.6333V17.6666H0.333984Z",fill:"white"})})}),(0,r.jsx)("div",{className:"bg-[#535357] shadow-md rounded-[12px] py-[15px] px-[20px]",children:(0,r.jsxs)("p",{className:"text-white",children:[(0,r.jsx)("span",{className:"font-bold",children:"Human:"})," Hey Alex, I want to redeem my tickets"]})})]}),(0,r.jsxs)(p.q.div,{className:"flex gap-[10px] flex-row",style:l,children:[(0,r.jsx)("div",{className:"rounded-full w-[50px] flex flex-col items-center justify-center h-[50px] bg-theme-main flex-none",children:(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32",children:(0,r.jsx)("path",{id:"Path_54718","data-name":"Path 54718",d:"M2.408,2.189C4.073.549,7.07.286,10.84,1.576a24.612,24.612,0,0,1,4.528,2.131A39.1,39.1,0,0,0,3.719,15.172,24.61,24.61,0,0,1,1.66,10.61C.431,6.821.742,3.828,2.408,2.189ZM3.261,15.9C-.19,10.035-.935,4.412,1.874,1.647S10.295-.283,16.1,3.262c5.863-3.451,11.486-4.2,14.251-1.387s1.93,8.42-1.614,14.227c3.451,5.863,4.2,11.486,1.387,14.251s-8.419,1.93-14.227-1.614c-5.863,3.451-11.486,4.2-14.251,1.387S-.283,21.706,3.261,15.9Zm11.91,12.383a24.607,24.607,0,0,1-4.561,2.058c-3.789,1.23-6.782.919-8.421-.747s-1.9-4.663-.613-8.432a24.609,24.609,0,0,1,2.131-4.527,37.885,37.885,0,0,0,5.116,6.43A37.883,37.883,0,0,0,15.172,28.282Zm.734-.433a36.878,36.878,0,0,1-6.541-5.319,36.881,36.881,0,0,1-5.213-6.623A38.191,38.191,0,0,1,16.1,4.152,36.881,36.881,0,0,1,22.634,9.47a36.881,36.881,0,0,1,5.214,6.625,36.88,36.88,0,0,1-5.319,6.54A36.877,36.877,0,0,1,15.906,27.849Zm.727.445a24.609,24.609,0,0,0,4.527,2.13c3.769,1.29,6.766,1.027,8.432-.613s1.977-4.632.747-8.421a24.606,24.606,0,0,0-2.058-4.56,37.89,37.89,0,0,1-5.219,6.348A37.89,37.89,0,0,1,16.633,28.293Zm11.66-12.926a24.607,24.607,0,0,0,2.131-4.527c1.29-3.769,1.027-6.766-.613-8.432S25.179.431,21.39,1.661a24.61,24.61,0,0,0-4.561,2.058,37.884,37.884,0,0,1,6.347,5.218A37.888,37.888,0,0,1,28.293,15.368ZM16,8.169a8.1,8.1,0,0,0,7.873,7.873A8.1,8.1,0,0,0,16,23.914a8.1,8.1,0,0,0-7.873-7.873A8.1,8.1,0,0,0,16,8.169Z",transform:"translate(0 0)",fill:"#000",fillRule:"evenodd"})})}),(0,r.jsx)("div",{className:"bg-[#535357] rounded-[12px] py-[15px] px-[20px] shadow-md",children:(0,r.jsxs)("p",{className:"text-white",children:[(0,r.jsx)("span",{className:"font-bold text-theme-main",children:"Alex:"})," Sure. Querying your prizes now."]})})]})]}),(0,r.jsx)("div",{className:"absolute bottom-[-130px] md:bottom-[-165px] flex left-0 right-0 items-center justify-center",children:(0,r.jsx)(p.q.div,{style:i,children:(0,r.jsx)(q,{className:"text-[70px] md:text-[150px]"})})})]})},Z=e=>{let{className:t}=e,s=(0,S.C)(),{address:l}=(0,F.mA)(),{openConnectModal:a}=(0,M.We)(),{isLoadingRedeem:i,requestRedeemCC:n,requestRedeemCCMock:c,step:o,showBuyRedemptions:d,redemptionsData:f,redemptionsDataLoading:u}=(0,x.useContext)(m),[h,j]=(0,p.q_)(()=>({from:{opacity:1}})),g=(0,x.useCallback)(()=>{j.start({to:{opacity:0}})},[j]),b=(0,x.useCallback)(async()=>{if(!l){null==a||a();return}n()},[n,l,a]);(0,x.useEffect)(()=>{o>.5&&o<1&&g()},[o,g]),(0,x.useCallback)(async e=>{g(),await new Promise(e=>{setTimeout(()=>{e()},300)}),c(e)},[g,c]),(0,x.useEffect)(()=>{j&&(o<1?j.start({to:{opacity:1}}):j.set({opacity:0}))},[o,j]);let N=!(!f||f.available<1);return(0,r.jsxs)("div",{className:t,children:[o<1&&(0,r.jsxs)(p.q.div,{className:"relative text-center",style:h,children:[s?(0,r.jsx)(v.Z,{size:"xxl",onClick:b,loading:u||i,disabled:!f||f.available<1,className:"!rounded-full",disabledText:f&&f.available<1&&(0,r.jsx)("p",{children:"0 Redemptions available"}),children:i||u||N?"Redeem NFTs":"Cannot Redeem"}):(0,r.jsx)(E.R,{size:"xxl"}),!1,d&&(0,r.jsx)("div",{className:"absolute top-[100px]",children:(0,r.jsx)(v.Z,{size:"sm",className:"!rounded-full",children:"BUY AI ACTIVATIONS"})})]}),1===o&&(0,r.jsx)(P,{})]})};var z=s(17831);let I=e=>{var t;let{className:s}=e,{step:l,isLoadingRedeem:a,redemptionCost:i,redemptionCostInCCString:n,redemptionsData:c,redemptionsDataLoading:o,fractionFull:p}=(0,x.useContext)(m),f=(0,S.C)(),u=(0,x.useMemo)(()=>c?Math.floor(c.fractions/p):0,[c,p]),v=(0,x.useMemo)(()=>c?c.fractions%p:0,[c,p]);return(0,r.jsxs)("div",{className:d()("font-main max-h-[400px] pb-[100px]",s),children:[l<1&&(0,r.jsxs)("div",{className:"flex flex-col justify-end",children:[(0,r.jsxs)("p",{className:"text-[32px] md:text-[42px] leading-[1.2em] mb-[34px] font-extrabold text-center md:text-left",children:["Here, ",(0,r.jsx)("span",{className:"text-theme-main",children:"Alex"})," redeems your tickets"]}),(0,r.jsxs)("p",{className:"text-[#727C7D] font-[20px] leading-[1.3em]",children:["Run Alex to win fractional NFTs with a 100% guaranteed win rate. 1 Redemption run costs ",n," and produces 1-40 of 40 total earn-enabled AI Data Capsule NFT fractions."]})]}),1===l&&a&&(0,r.jsx)("div",{className:"relative",children:(0,r.jsx)("p",{className:"font-bold text-[20px] absolute top-[5px] md:top-[20px] animate-pulse",children:"Calculating Winnings..."})}),2===l&&(0,r.jsx)("div",{className:"hidden lg:flex flex-col justify-end",children:(0,r.jsx)(_,{})}),(0,r.jsx)("div",{}),(0,r.jsxs)("div",{className:"flex flex-col mt-[20px] md:mt-0 items-start md:items-end justify-end w-full",children:[l<1&&(0,r.jsxs)("div",{className:"md:text-right w-full",children:[f&&(u>0||v>0)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex flex-col md:items-end w-full gap-[8px] mb-[10px]",children:[(0,r.jsx)("span",{className:"",children:"You have"}),(0,r.jsxs)("div",{className:"flex items-center justify-start md:justify-end gap-[8px]",children:[u>0&&(0,r.jsxs)("div",{className:"flex justify-center items-center lg:justify-end relative gap-[4px]",children:[(0,r.jsxs)("span",{className:"text-theme-main text-[30px] font-extrabold",children:[u,(0,r.jsx)("span",{className:"text-[#fff]",children:"x"})]}),(0,r.jsx)(j,{fill:"#00F0FF"})]}),u>0&&v>0&&(0,r.jsx)("div",{className:"flex justify-center items-center lg:justify-end relative",children:(0,r.jsx)("span",{className:"text-[#fff] text-[30px] font-extrabold",children:"&"})}),v>0&&(0,r.jsxs)("div",{className:"flex justify-center items-center lg:justify-end relative",children:[(0,r.jsxs)("span",{className:"text-theme-main text-[30px] font-extrabold",children:[String(v).padStart(2,"0"),(0,r.jsxs)("span",{className:"text-[#fff]",children:["/",p]})]}),(0,r.jsx)(h,{fill:"#00F0FF"})]})]})]}),(0,r.jsxs)("div",{children:["Available:"," ",(0,r.jsxs)("span",{className:"relative text-theme-main",children:[(0,r.jsx)("span",{className:d()({"opacity-40":o}),children:null!==(t=null==c?void 0:c.available)&&void 0!==t?t:0}),o&&(0,r.jsx)(z.Z,{size:"xs"})]})," ","Redemptions"]})]}),(0,r.jsx)("p",{children:i})]}),2===l&&(0,r.jsx)(C,{className:"hidden lg:block"})]})]})};var T=s(13392),R=s(4528),L=s(5590);async function W(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,s=new Promise(e=>{setTimeout(()=>e(),t)});return await Promise.all([e,s]).then(e=>{let[t]=e;return t})}var B=s(17e3);let Y=()=>{let e=function(){let e=(0,g.b9)(b.HP),{address:t}=(0,F.mA)(),{openConnectModal:s}=(0,M.We)(),l=(0,F.xx)(),a=(0,R.Z)(),[i,n]=(0,x.useState)(0),[r,c]=(0,x.useState)("cc"),o="3,000 Computation Credits",[d,m]=(0,x.useState)(0),[p,f]=(0,x.useState)(0),[u,h]=(0,x.useState)(0),[j,v]=(0,x.useState)(!1),[N,y]=(0,x.useState)(!1),[w,C]=(0,x.useState)(""),{data:_,isLoading:k,error:A}=(0,B.a)(["get_redemptions",t,l],()=>a.rpc("get_redemptions",{chainid:l,paddress:t}).then(e=>e.data),{enabled:!!t&&!!l}),E=(0,x.useMemo)(()=>_?"Redeem total: ".concat(_.total," spent: ").concat(_.spent):"",[_]),{isLoading:S,signMessageAsync:q}=(0,F.QW)({message:E}),P=(0,x.useCallback)(async e=>{c("cc"),n(1),v(!0);let t=await new Promise(t=>{setTimeout(()=>{t(null!=e?e:Math.max(1,Math.floor(800*Math.random())))},3e3)}),s=t>0&&t%40==0;f(s?40:t%40),h(Math.max(0,Math.floor(t/40)+(s?-1:0))),v(!1),n(2)},[c,n,f]);(0,x.useCallback)(async e=>{if(!t||!l)throw Error("Not logged in")},[t,l]);let Z=(0,x.useCallback)(async()=>{if(!t||!l)throw Error("Not logged in");try{let e=await q();return e}catch(e){throw e}},[t,l,q]),{data:z}=(0,B.a)({queryKey:["redemptions-sign",t,l,w],queryFn:async()=>{let e=fetch("".concat(T.O.NEXT_PUBLIC_VERCEL_API,"/api/redemptions"),{method:"POST",body:JSON.stringify({address:t,signature:w,chain_id:"".concat(l)})}).then(e=>e.json()).catch(e=>{throw e});return await W(e,4e3)},enabled:1===i&&!!w,onSuccess(t){if(t.error){e({open:!0,message:t.error}),v(!1),n(0);return}let{fractions:s}=t;f(s>0&&s%40==0?40:s%40),h(Math.floor(s/40)),v(!1),n(2)},onError(t){e({open:!0,message:(0,L.W)(t)}),v(!1),n(0)}}),I=(0,x.useCallback)(async()=>{if(!t){null==s||s();return}if(_&&!(_.available<1)){v(!0);try{n(.5),y(!0);let e=await Z();C(e),y(!1),n(.9),await new Promise(e=>{setTimeout(()=>{e()},4e3)}),c("cc"),n(1)}catch(t){n(0),C(""),v(!1),e({open:!0,message:(0,L.W)(t)}),y(!1);return}}},[c,n,t,s,_,e,Z]),Y=(0,x.useCallback)(()=>{n(0)},[n]);return{step:i,setStep:n,requestRedeemCC:I,requestRedeemCCMock:P,redeemType:r,redemptionCost:"1 Redemption Cost = ".concat(o),redemptionCostInCC:3e3,redemptionCostInCCString:o,isLoadingRedeem:j,redeemedFractions:p,setRedeemedFractions:f,redeemedFull:u,setRedeemedFull:h,completedCapsules:d,fractionFull:40,requestAgain:Y,showBuyRedemptions:!1,redemptionsData:_,redemptionsDataLoading:k}}(),{step:t}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:d()("h-[100vh] min-h-[600px] md:min-h-[900px] relative",{"pb-[100px] pt-0 md:pt-[100px]":t<2,"py-[100px]":t>=2}),children:[(0,r.jsx)("div",{className:"absolute top-0 left-0 right-0 h-[calc(50%+100px)] md:h-[50%] bg-[#101012]"}),(0,r.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-[calc(50%-100px)] md:h-[50%] bg-[#1E1E1E]"}),(0,r.jsx)(m.Provider,{value:e,children:(0,r.jsx)("div",{className:"relative z-10",children:(0,r.jsxs)("div",{className:"container relative",children:[(0,r.jsxs)("div",{className:d()("absolute top-0 right-0 bottom-0 left-0 grid md:grid-cols-[1fr_330px_1fr] items-center scale-75 md:scale-100",{"z-20 lg:z-0":2===t}),children:[(0,r.jsx)("div",{}),(0,r.jsx)(k,{}),(0,r.jsx)("div",{})]}),(0,r.jsxs)("div",{className:d()("z-10 relative w-full min-h-[100vh] md:grid md:grid-rows-[1fr_200px_1fr] md:mt-[-100px]",{}),children:[(0,r.jsx)(A,{className:"flex flex-col justify-center md:grid md:grid-cols-[1fr_330px_1fr] items-center pt-[190px] md:pt-[150px] h-[calc(50vh-39px)] md:h-auto"}),(0,r.jsx)(Z,{className:"flex flex-col items-center justify-center py-[50px] md:py-0 relative top-[50px] md:top-[-50px] lg:top-0"}),(0,r.jsx)(I,{className:"grid md:grid-cols-[1fr_330px_1fr]"})]})]})})})]}),(0,r.jsx)("div",{className:"h-[100px] bg-[#1E1E1E]"})]})},O=()=>(0,r.jsx)(c.Z,{title:"Redemptions",children:(0,r.jsx)(Y,{})});var H=O}},function(e){e.O(0,[5048,9742,2236,6906,9774,2888,179],function(){return e(e.s=7983)}),_N_E=e.O()}]);